
document.addEventListener("DOMContentLoaded",function(e){var $=jQuery;const pathToServer=vkLtc.ajaxurl;const sendData={action:'ids'};const decodeUri=(url)=>{if(/%[0-9a-fA-F]{2}/.test(url)){try{return decodeURIComponent(url);}catch(error){return url;}}
return url;}
$.post(pathToServer,sendData,function(ps){if(typeof ps==='string'){try{ps=JSON.parse(ps);}catch(e){return;}}
if(!ps||typeof ps!=='object'||$.isEmptyObject(ps))return;$.each(ps,function(id,ls){if(!ls||typeof ls!=='object')return;try{var redirectUrl=ls.re||'';var permalinkUrl=ls.pl||'';if(!redirectUrl&&!permalinkUrl)return;var decodedRedirect=decodeUri(redirectUrl);var decodedPermalink=decodeUri(permalinkUrl);var targetBlank=Number(ls.tg)===1;var c=$('.post-'+id+' a').filter(function(){var href=decodeUri($(this).attr('href'));return href===decodedRedirect||href===decodedPermalink;});if(c.length){if(redirectUrl){$(c).attr('href',redirectUrl);}
$(c).attr('target',targetBlank?'_blank':'_self');if(targetBlank){$(c).each(function(){var rel=($(this).attr('rel')||'').split(/\s+/).filter(Boolean);if(rel.indexOf('noreferrer')===-1)rel.push('noreferrer');if(rel.indexOf('noopener')===-1)rel.push('noopener');$(this).attr('rel',rel.join(' '));});}else{$(c).each(function(){var rel=($(this).attr('rel')||'').split(/\s+/).filter(Boolean).filter(function(v){return v!=='noreferrer'&&v!=='noopener';}).join(' ');if(rel){$(this).attr('rel',rel);}else{$(this).removeAttr('rel');}});}}}catch(e){}});});},false);